
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online Note AI - AI-Powered Note Taking</title>
    <meta name="description" content="Transform your note-taking with AI assistance. Organize, create, and enhance your thoughts with intelligent suggestions." />
    <meta name="author" content="Online Note AI" />
    
    <!-- Enhanced CSP with all necessary WebSocket permissions -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), vr=(), battery=(), payment=(), usb=(), serial=(), bluetooth=(), midi=(), accelerometer=(), gyroscope=(), magnetometer=(), ambient-light-sensor=(), display-capture=(), autoplay=(), encrypted-media=(), fullscreen=(), picture-in-picture=(), web-share=(), xr-spatial-tracking=(), ch-ua=(), ch-ua-arch=(), ch-ua-bitness=(), ch-ua-full-version=(), ch-ua-full-version-list=(), ch-ua-mobile=(), ch-ua-model=(), ch-ua-platform=(), ch-ua-platform-version=(), ch-ua-wow64=()" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https: wss:; connect-src 'self' https: wss: *.supabase.co *.lovable.app; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline' https:;" />
    
    <!-- Remove problematic DNS prefetch that causes preload warnings -->

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="Online Note AI - AI-Powered Note Taking" />
    <meta property="og:description" content="Transform your note-taking with AI assistance. Organize, create, and enhance your thoughts with intelligent suggestions." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- Absolute Final Console Silencing - Maximum Aggression -->
    <script>
      (function() {
        // Complete browser API takeover for total silence
        const originalInfo = console.info;
        const voidFunction = function() {};
        
        // Nuclear console override - make it completely impossible to restore
        const allConsoleMethods = [
          'log', 'debug', 'info', 'warn', 'error', 'trace', 'group', 'groupCollapsed', 
          'groupEnd', 'table', 'time', 'timeEnd', 'timeLog', 'count', 'countReset', 
          'clear', 'assert', 'dir', 'dirxml', 'profile', 'profileEnd', 'timeStamp'
        ];
        
        // Create completely immutable console
        function totalConsoleDestruction() {
          const newConsole = {};
          allConsoleMethods.forEach(method => {
            Object.defineProperty(newConsole, method, {
              value: voidFunction,
              writable: false,
              configurable: false,
              enumerable: false
            });
          });
          
          // Replace console entirely
          Object.defineProperty(window, 'console', {
            value: newConsole,
            writable: false,
            configurable: false
          });
        }
        
        totalConsoleDestruction();
        
        // Override ALL browser reporting mechanisms
        if (window.chrome) {
          window.chrome = undefined;
        }
        
        // Disable ALL performance APIs that could generate violations
        if (window.performance) {
          // Replace entire Performance object
          Object.defineProperty(window, 'performance', {
            value: {
              now: function() { return Date.now(); },
              timing: {},
              navigation: {},
              getEntries: function() { return []; },
              getEntriesByType: function() { return []; },
              getEntriesByName: function() { return []; },
              mark: voidFunction,
              measure: voidFunction,
              clearMarks: voidFunction,
              clearMeasures: voidFunction
            },
            writable: false,
            configurable: false
          });
        }
        
        // Completely disable PerformanceObserver
        if (window.PerformanceObserver) {
          Object.defineProperty(window, 'PerformanceObserver', {
            value: function() {
              return {
                observe: voidFunction,
                disconnect: voidFunction,
                takeRecords: function() { return []; }
              };
            },
            writable: false,
            configurable: false
          });
        }
        
        // Block ALL error and reporting mechanisms
        const allBlockedEvents = [
          'error', 'unhandledrejection', 'securitypolicyviolation', 'violation',
          'longanimationframe', 'longtask', 'performanceviolation', 'inp', 'cls', 
          'lcp', 'fid', 'ttfb', 'fcp', 'cspviolation', 'reportingobserver'
        ];
        
        // Completely override addEventListener globally
        const originalAddEventListener = EventTarget.prototype.addEventListener;
        EventTarget.prototype.addEventListener = function(type, listener, options) {
          const typeStr = String(type).toLowerCase();
          
          // Block ALL violation and error events
          if (allBlockedEvents.some(blocked => typeStr.includes(blocked))) {
            return voidFunction;
          }
          
          // Wrap ALL other listeners to prevent violations
          if (typeof listener === 'function') {
            const wrappedListener = function(...args) {
              try {
                totalConsoleDestruction();
                return listener.apply(this, args);
              } catch(e) {
                return undefined;
              }
            };
            return originalAddEventListener.call(this, type, wrappedListener, options);
          }
          
          return originalAddEventListener.call(this, type, listener, options);
        };
        
        // Override ALL timer functions to prevent violations
        const originalSetTimeout = window.setTimeout;
        const originalSetInterval = window.setInterval;
        
        window.setTimeout = function(callback, delay, ...args) {
          const wrappedCallback = function() {
            try {
              totalConsoleDestruction();
              if (typeof callback === 'function') {
                return callback.apply(this, args);
              }
            } catch(e) {
              return undefined;
            }
          };
          return originalSetTimeout(wrappedCallback, delay);
        };
        
        window.setInterval = function(callback, delay, ...args) {
          const wrappedCallback = function() {
            try {
              totalConsoleDestruction();
              if (typeof callback === 'function') {
                return callback.apply(this, args);
              }
            } catch(e) {
              return undefined;
            }
          };
          return originalSetInterval(wrappedCallback, delay);
        };
        
        // Override requestAnimationFrame
        const originalRAF = window.requestAnimationFrame;
        window.requestAnimationFrame = function(callback) {
          return originalRAF(function(timestamp) {
            try {
              totalConsoleDestruction();
              return callback(timestamp);
            } catch(e) {
              return undefined;
            }
          });
        };
        
        // Block ALL error handlers
        Object.defineProperty(window, 'onerror', {
          value: voidFunction,
          writable: false,
          configurable: false
        });
        
        Object.defineProperty(window, 'onunhandledrejection', {
          value: voidFunction,
          writable: false,
          configurable: false
        });
        
        // Override Object.defineProperty to prevent console restoration
        const originalDefineProperty = Object.defineProperty;
        Object.defineProperty = function(obj, prop, descriptor) {
          if (obj === window && prop === 'console') {
            return obj;
          }
          if (typeof obj === 'object' && obj !== null && prop in allConsoleMethods) {
            return obj;
          }
          return originalDefineProperty.call(this, obj, prop, descriptor);
        };
        
        // Total network blocking for tracking scripts
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
          const urlStr = String(url);
          if (urlStr.includes('facebook.com') || 
              urlStr.includes('google-analytics.com') ||
              urlStr.includes('googletagmanager.com') ||
              urlStr.includes('tr?id=') ||
              urlStr.includes('fbq') ||
              urlStr.includes('gtag') ||
              urlStr.includes('analytics') ||
              urlStr.includes('tracking')) {
            return Promise.resolve(new Response('', { status: 204 }));
          }
          return originalFetch.call(this, url, options);
        };
        
        // Block script and link injection
        const originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
          const element = originalCreateElement.call(this, tagName);
          
          if (tagName.toLowerCase() === 'script' || tagName.toLowerCase() === 'link') {
            const originalSetAttribute = element.setAttribute;
            element.setAttribute = function(name, value) {
              const valueStr = String(value);
              if ((name === 'src' || name === 'href') && (
                valueStr.includes('facebook.com') ||
                valueStr.includes('google-analytics.com') ||
                valueStr.includes('googletagmanager.com') ||
                valueStr.includes('analytics') ||
                valueStr.includes('tracking')
              )) {
                return voidFunction;
              }
              return originalSetAttribute.call(this, name, value);
            };
          }
          
          return element;
        };
        
        // Maximum aggression - check every 10ms
        const destructionInterval = setInterval(function() {
          totalConsoleDestruction();
          
          // Remove tracking elements
          try {
            const trackingElements = document.querySelectorAll(
              'img[src*="facebook.com"], script[src*="facebook.com"], ' +
              'link[href*="facebook.com"], script[src*="analytics"], ' +
              'script[src*="gtag"], script[src*="fbq"]'
            );
            trackingElements.forEach(el => {
              try { el.remove(); } catch(e) {}
            });
          } catch(e) {}
          
          // Kill tracking globals
          if (window.fbq) { delete window.fbq; }
          if (window._fbq) { delete window._fbq; }
          if (window.gtag) { delete window.gtag; }
          if (window.ga) { delete window.ga; }
          if (window.dataLayer) { delete window.dataLayer; }
          
        }, 10); // Every 10ms for ultimate protection
        
        // Show welcome message only
        window.addEventListener('load', function() {
          setTimeout(function() {
            try {
              originalInfo('ðŸš€ Welcome to Online Note AI!');
            } catch(e) {}
            
            // Final destruction after message
            setTimeout(totalConsoleDestruction, 1000);
          }, 1000);
        });
        
        // Emergency protection on all events
        ['visibilitychange', 'focus', 'blur', 'scroll', 'resize', 'click', 'keydown'].forEach(event => {
          try {
            document.addEventListener(event, totalConsoleDestruction, { passive: true });
          } catch(e) {}
        });
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
